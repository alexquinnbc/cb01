                 <input type="text" id="search-input" placeholder="Search for a bias...">
                </div>
                <div id="search-results-container">
                    <p id="search-prompt" class="search-prompt">Start typing to search for a bias.</p>
                    <div id="search-results"></div>
                    <p id="no-results" style="display: none;">No biases found.</p>
                </div>
            </div>

        </main>

        <nav id="bottom-nav">
            <button class="nav-item active" data-target="home-screen">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z" /><path d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z" /></svg>
                <span>Home</span>
            </button>
            <button class="nav-item" data-target="categories-screen">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z" clip-rule="evenodd" /></svg>
                <span>Categories</span>
            </button>
            <button class="nav-item" data-target="search-screen">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /></svg>
                <span>Search</span>
            </button>
            <button id="settings-btn" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M11.078 2.25c-.917 0-1.699.663-1.946 1.55l-.26 1.037a1.875 1.875 0 01-.453.823l-.759.758a1.875 1.875 0 00-2.652 2.652l.758.759c.26.26.463.57.598.901l.26 1.037c.247.887 1.03.1.55 1.946 0 .917.663 1.699 1.55 1.946l1.037.26a1.875 1.875 0 01.823.453l.758.759a1.875 1.875 0 002.652 2.652l.759-.758a1.875 1.875 0 01.901-.598l1.037-.26c.887-.247 1.55-1.029 1.55-1.946 0-.917-.663-1.699-1.55-1.946l-1.037-.26a1.875 1.875 0 01-.823-.453l-.758-.759a1.875 1.875 0 00-2.652-2.652l-.759.758a1.875 1.875 0 01-.901.598l-1.037.26c-.887.247-1.55 1.029-1.55 1.946L9.53 16.45c-.247.887-1.029 1.55-1.946 1.55-.917 0-1.699-.663-1.946-1.55l-.26-1.037a1.875 1.875 0 01.453-.823l.759-.758a1.875 1.875 0 002.652-2.652l-.758-.759a1.875 1.875 0 01-.598-.901l-.26-1.037c-.247-.887-1.03-1.55-1.946-1.55zM12 8.25a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z" clip-rule="evenodd" /></svg>
                <span>Settings</span>
            </button>
        </nav>
    </div>

    <div id="modal-overlay"></div>
    <div id="settings-modal">
        <h3 class="settings-header">Settings</h3>
        <div class="setting-item">
            <span>Dark Mode</span>
            <label class="toggle-switch">
                <input type="checkbox" id="dark-mode-toggle">
                <span class="slider"></span>
            </label>
        </div>
        <div class="setting-item">
            <span>Show Images</span>
            <label class="toggle-switch">
                <input type="checkbox" id="image-toggle" checked>
                <span class="slider"></span>
            </label>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- DATA ---
            const cognitiveBiasesData = {
                "too-much-information": {
                    name: "Too Much Information",
                    description: "We filter out, pay attention to specifics, and fill in gaps.",
                    image: `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill:%23f7d1c1%7D.b%7Bfill:%23c27e85%7D.c%7Bfill:%23a1a6b4%7D%3C/style%3E%3C/defs%3E%3Crect class='a' width='100' height='100'/%3E%3Cpath class='b' d='M0,50H50V100H0Z'/%3E%3Crect class='c' x='60' y='60' width='40' height='40'/%3E%3C/svg%3E`,
                    subcategories: {
                        "primed-or-repeated": { name: "We notice things already primed in memory or repeated often", biases: ["Attentional bias", "Availability heuristic", "Baader–Meinhof phenomenon (frequency illusion)", "Cue-dependent forgetting", "Empathy gap", "Frequency illusion", "Illusory truth effect", "Mere exposure effect", "Modality effect", "Priming", "Recency illusion", "Repetition bias", "Salience bias", "Selection bias", "Serial position effect", "Von Restorff effect (isolation effect)"] },
                        "bizarre-or-funny": { name: "Bizarre, funny, visually striking, or anthropomorphic things stick out more than non-bizarre/unfunny things", biases: ["Humor effect", "Picture superiority effect", "Bizarreness effect", "Self-relevance effect"] },
                        "changed": { name: "We notice when something has changed", biases: ["Change blindness", "Cyclical thinking", "Anchoring", "Conservatism bias", "Distinction bias"] },
                        "confirm-beliefs": { name: "We are drawn to details that confirm our own beliefs", biases: ["Confirmation bias", "Congruence bias", "Experimenter’s bias", "Observer-expectancy effect", "Ostrich effect", "Semmelweis reflex", "Subjective validation"] },
                        "flaws-in-others": { name: "We notice flaws in others more than in ourselves", biases: ["Bias blind spot", "Naïve cynicism", "Naïve realism"] },
                        "find-patterns": { name: "We tend to find stories and patterns even in sparse data", biases: ["Clustering illusion", "Conjunction fallacy", "Gambler’s fallacy", "Illusory correlation", "Pareidolia", "Anthropomorphism"] }
                    }
                },
                "not-enough-meaning": {
                    name: "Not Enough Meaning",
                    description: "We seek patterns and connections, even if they're not real.",
                    image: `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23f9e0d1' width='100' height='100'/%3E%3Ccircle fill='%23d18e7b' cx='50' cy='50' r='25'/%3E%3Crect fill='%233a3a3a' x='35' y='35' width='30' height='30' transform='rotate(45 50 50)'/%3E%3C/svg%3E`,
                    subcategories: {
                        "stereotypes": { name: "We fill in characteristics from stereotypes, generalities, and prior histories", biases: ["Cross-race effect", "Out-group homogeneity bias", "In-group bias", "Stereotyping"] },
                        "familiar-is-better": { name: "We imagine things and people we’re familiar with or fond of as better", biases: ["Cheerleader effect", "Halo effect", "Positivity effect", "Positivity bias", "Negativity bias", "Trait ascription bias"] },
                        "simplify-numbers": { name: "We simplify probabilities and numbers to make them easier to think about", biases: ["Normalcy bias", "Subadditivity effect", "Denomination effect"] },
                        "know-others-thinking": { name: "We think we know what others are thinking", biases: ["Curse of knowledge", "Illusion of transparency", "Mind reading illusion", "Spotlight effect"] },
                        "project-mindset": { name: "We project our current mindset and assumptions onto the past and future", biases: ["Impact bias", "Pessimism bias", "Planning fallacy", "Pro-innovation bias", "Projection bias", "Restraint bias", "Self-consistency bias", "Telescoping effect"] }
                    }
                },
                "need-to-act-fast": {
                    name: "Need To Act Fast",
                    description: "We make quick decisions to survive and avoid danger.",
                    image: `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23c1e1d4' width='100' height='100'/%3E%3Cpath fill='%23e8a9a8' d='M0 0 L50 100 L100 0 Z'/%3E%3Ccircle fill='%236c8b9d' cx='50' cy='60' r='15'/%3E%3C/svg%3E`,
                    subcategories: {
                        "must-be-confident": { name: "To act, we must be confident we can make an impact and feel what we do is important", biases: ["Optimism bias", "Overconfidence effect", "Egocentric bias", "Hard–easy effect", "Illusion of control", "Social desirability bias", "Dunning–Kruger effect"] },
                        "favor-immediate": { name: "To stay focused, we favor the immediate, relatable thing in front of us", biases: ["Hyperbolic discounting", "Present bias", "Appeal to noveltyu", "Identifiable victim effect", "Unit bias", "Zero-risk bias"] },
                        "complete-things": { name: "To get things done, we tend to complete things we’ve invested time and energy in", biases: ["Sunk cost fallacy", "Escalation of commitment", "IKEA effect", "Endowment effect", "Loss aversion", "Pseudocertainty effect"] },
                        "avoid-mistakes": { name: "To avoid mistakes, we aim to preserve autonomy and group status, and avoid irreversible decisions", biases: ["Status quo bias", "System justification", "Reactance", "Omission bias", "Decoy effect", "Reverse psychology"] },
                        "favor-simple": { name: "We favor simple-looking options over complex, ambiguous ones", biases: ["Ambiguity effect", "Information bias", "Overchoice", "Paradox of choice"] }
                    }
                },
                "what-should-we-remember": {
                    name: "What Should We Remember?",
                    description: "We edit and reinforce memories after the fact.",
                    image: `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23f9f3e4' width='100' height='100'/%3E%3Cpath fill='%23d3c0a5' d='M20 20 H80 L50 80 Z'/%3E%3Ccircle fill='%237782a3' cx='70' cy='30' r='10'/%3E%3C/svg%3E`,
                    subcategories: {
                        "edit-memories": { name: "We edit and reinforce some memories after the fact", biases: ["Consistency bias", "Misinformation effect", "Misattribution of memory", "Source confusion", "False memory", "Suggestibility"] },
                        "form-generalities": { name: "We discard specifics to form generalities", biases: ["Leveling and sharpening", "Stereotypical generalization"] },
                        "reduce-to-elements": { name: "We reduce events and lists to their key elements", biases: ["Serial position effect", "Peak–end rule", "List length effect"] },
                        "store-differently": { name: "We store memories differently based on how they were experienced", biases: ["Context effect", "Mood-congruent memory bias", "State-dependent memory"] }
                    }
                }
            };
            
            const allBiasesFlat = [];
            for (const categoryId in cognitiveBiasesData) {
                const category = cognitiveBiasesData[categoryId];
                for (const subcategoryId in category.subcategories) {
                    const subcategory = category.subcategories[subcategoryId];
                    subcategory.biases.forEach(biasName => {
                        allBiasesFlat.push({
                            name: biasName,
                            categoryName: category.name,
                            subCategoryName: subcategory.name,
                            categoryId: categoryId,
                            definition: `The tendency to ${biasName.toLowerCase().replace(' effect', '').replace(' bias', '')}. This is a placeholder definition for "${biasName}".`,
                            example: `For example, a person exhibiting ${biasName} might... (This is a placeholder example).`,
                            mitigation: `To combat ${biasName}, one can try to be more aware of their thought processes and actively seek out disconfirming evidence or alternative perspectives.`
                        });
                    });
                }
            }
            
            // --- DOM ELEMENTS ---
            const mainContent = document.getElementById('main-content');
            const navItems = document.querySelectorAll('.nav-item');
            const backButtons = document.querySelectorAll('.back-button');
            const settingsBtn = document.getElementById('settings-btn');
            const settingsModal = document.getElementById('settings-modal');
            const modalOverlay = document.getElementById('modal-overlay');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const imageToggle = document.getElementById('image-toggle');

            // --- STATE ---
            let navigationStack = ['home-screen'];
            let currentScreen = 'home-screen';

            // --- NAVIGATION ---
            const navigateTo = (screenId, context = null) => {
                const newScreen = document.getElementById(screenId);
                const oldScreen = document.getElementById(currentScreen);
                
                if (currentScreen === screenId) return;

                if (oldScreen) {
                    oldScreen.classList.remove('active');
                    if (screenId !== 'home-screen' && screenId !== 'categories-screen' && screenId !== 'search-screen') {
                       oldScreen.classList.add('no-transform');
                    } else {
                       oldScreen.classList.remove('no-transform');
                    }
                }
                
                newScreen.classList.add('active');
                
                if (screenId === 'home-screen' || screenId === 'categories-screen' || screenId === 'search-screen') {
                    navigationStack = [screenId];
                } else {
                    navigationStack.push(screenId);
                }
                currentScreen = screenId;
                updateNav(screenId);
                
                // Scroll to top of new screen
                newScreen.scrollTop = 0;
            };

            const goBack = () => {
                if (navigationStack.length > 1) {
                    const oldScreenId = navigationStack.pop();
                    const newScreenId = navigationStack[navigationStack.length - 1];
                    
                    const oldScreen = document.getElementById(oldScreenId);
                    const newScreen = document.getElementById(newScreenId);

                    oldScreen.classList.remove('active');
                    newScreen.classList.remove('no-transform');
                    newScreen.classList.add('active');
                    
                    currentScreen = newScreenId;
                    updateNav(newScreenId);
                }
            };
            
            const updateNav = (targetId) => {
                navItems.forEach(item => {
                    if (item.dataset.target === targetId || (targetId.includes('category-detail') && item.dataset.target === 'categories-screen')) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
            };

            // --- RENDERING ---
            const renderCategories = () => {
                const listEl = document.getElementById('categories-list');
                let html = '';
                for (const id in cognitiveBiasesData) {
                    const category = cognitiveBiasesData[id];
                    html += `
                        <div class="card category-card" data-category-id="${id}">
                            <div class="category-card-text">
                                <h3>${category.name}</h3>
                                <p>${category.description}</p>
                            </div>
                            <div class="category-card-image">
                                <img src="${category.image}" alt="${category.name} abstract art">
                            </div>
                        </div>`;
                }
                listEl.innerHTML = html;
            };

            const renderCategoryDetail = (categoryId) => {
                const category = cognitiveBiasesData[categoryId];
                document.getElementById('category-detail-title').innerText = category.name;
                const contentEl = document.getElementById('category-detail-content');
                let html = '';
                for (const subId in category.subcategories) {
                    const subcategory = category.subcategories[subId];
                    html += `<div class="subcategory-group">
                                <h3 class="subcategory-header">${subcategory.name}</h3>`;
                    subcategory.biases.forEach(biasName => {
                        html += `
                            <div class="bias-list-item" data-bias-name="${biasName}">
                                <h4>${biasName}</h4>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>
                            </div>`;
                    });
                    html += `</div>`;
                }
                contentEl.innerHTML = html;
                navigateTo('category-detail-screen');
            };

            const renderBiasDetail = (biasName) => {
                const bias = allBiasesFlat.find(b => b.name === biasName);
                if (!bias) return;

                document.getElementById('bias-detail-title').innerText = bias.name;
                const category = cognitiveBiasesData[bias.categoryId];
                document.getElementById('bias-detail-image').src = `https://source.unsplash.com/420x150/?abstract,blur&c=${encodeURIComponent(bias.name)}`;

                document.getElementById('bias-detail-content').innerHTML = `
                    <div class="content-section">
                        <h3>Definition</h3>
                        <p>${bias.definition}</p>
                    </div>
                    <div class="content-section">
                        <h3>Examples</h3>
                        <p>${bias.example}</p>
                    </div>
                    <div class="content-section">
                        <h3>Mitigation Strategies</h3>
                        <p>${bias.mitigation}</p>
                    </div>
                `;
                navigateTo('bias-detail-screen');
            };

            const renderSearchResults = (query) => {
                const resultsContainer = document.getElementById('search-results');
                const noResultsEl = document.getElementById('no-results');
                const searchPrompt = document.getElementById('search-prompt');
                
                if (!query) {
                    resultsContainer.innerHTML = '';
                    noResultsEl.style.display = 'none';
                    searchPrompt.style.display = 'block';
                    return;
                }
                
                searchPrompt.style.display = 'none';
                const filteredBiases = allBiasesFlat.filter(b => b.name.toLowerCase().includes(query.toLowerCase()));
                
                if (filteredBiases.length === 0) {
                    resultsContainer.innerHTML = '';
                    noResultsEl.style.display = 'block';
                } else {
                    noResultsEl.style.display = 'none';
                    let html = '';
                    filteredBiases.forEach(bias => {
                        html += `
                            <div class="search-result-item" data-bias-name="${bias.name}">
                                <h4>${bias.name}</h4>
                                <p>${bias.categoryName}</p>
                            </div>
                        `;
                    });
                    resultsContainer.innerHTML = html;
                }
            };
            
            // --- SETTINGS ---
            const applySettings = () => {
                // Dark Mode
                const isDarkMode = localStorage.getItem('darkMode') === 'true';
                darkModeToggle.checked = isDarkMode;
                if (isDarkMode) {
                    document.documentElement.classList.add('dark-mode');
                } else {
                    document.documentElement.classList.remove('dark-mode');
                }
                
                // Show Images
                const showImages = localStorage.getItem('showImages') !== 'false'; // default to true
                imageToggle.checked = showImages;
                if (showImages) {
                    document.body.classList.remove('hide-images');
                } else {
                    document.body.classList.add('hide-images');
                }
            };

            // --- EVENT LISTENERS ---
            document.getElementById('start-exploring-btn').addEventListener('click', () => navigateTo('categories-screen'));

            navItems.forEach(item => {
                if (item.id !== 'settings-btn') {
                    item.addEventListener('click', () => {
                        navigateTo(item.dataset.target);
                    });
                }
            });

            backButtons.forEach(btn => btn.addEventListener('click', goBack));

            mainContent.addEventListener('click', e => {
                const categoryCard = e.target.closest('.category-card');
                if (categoryCard) {
                    renderCategoryDetail(categoryCard.dataset.categoryId);
                }

                const biasListItem = e.target.closest('.bias-list-item, .search-result-item');
                if (biasListItem) {
                    renderBiasDetail(biasListItem.dataset.biasName);
                }
            });
            
            // Search
            const searchInput = document.getElementById('search-input');
            searchInput.addEventListener('input', () => {
                renderSearchResults(searchInput.value);
            });
            
            // Settings Modal
            settingsBtn.addEventListener('click', () => {
                settingsModal.classList.add('active');
                modalOverlay.classList.add('active');
            });

            modalOverlay.addEventListener('click', () => {
                settingsModal.classList.remove('active');
                modalOverlay.classList.remove('active');
            });
            
            darkModeToggle.addEventListener('change', () => {
                document.documentElement.classList.toggle('dark-mode');
                localStorage.setItem('darkMode', darkModeToggle.checked);
            });
            
            imageToggle.addEventListener('change', () => {
                document.body.classList.toggle('hide-images');
                localStorage.setItem('showImages', imageToggle.checked);
            });

            // --- INITIALIZATION ---
            applySettings();
            renderCategories();
        });
    </script>
</body>
</html>
